(function(q){"object"==typeof exports&&"object"==typeof module?q(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],q):q(CodeMirror)})(function(q){function ka(q,r,p){return/^(?:operator|sof|keyword c|case|new|export|default|[\[{}\(,;:]|=>)$/.test(r.lastType)||"quasi"==r.lastType&&/\{\s*$/.test(q.string.slice(0,q.pos-(p||0)))}q.defineMode("javascript",function(xa,r){function p(a,c,b){H=a;Q=b;return c}function D(a,c){var b=a.next();if('"'==b||"'"==
b)return c.tokenize=ya(b),c.tokenize(a,c);if("."==b&&a.match(/^\d+(?:[eE][+\-]?\d+)?/))return p("number","number");if("."==b&&a.match(".."))return p("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(b))return p(b);if("\x3d"==b&&a.eat("\x3e"))return p("\x3d\x3e","operator");if("0"==b&&a.eat(/x/i))return a.eatWhile(/[\da-f]/i),p("number","number");if("0"==b&&a.eat(/o/i))return a.eatWhile(/[0-7]/i),p("number","number");if("0"==b&&a.eat(/b/i))return a.eatWhile(/[01]/i),p("number","number");if(/\d/.test(b))return a.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),
p("number","number");if("/"==b){if(a.eat("*"))return c.tokenize=R,R(a,c);if(a.eat("/"))return a.skipToEnd(),p("comment","comment");if(ka(a,c,1)){a:for(var b=!1,d,e=!1;null!=(d=a.next());){if(!b){if("/"==d&&!e)break a;"["==d?e=!0:e&&"]"==d&&(e=!1)}b=!b&&"\\"==d}a.match(/^\b(([gimyu])(?![gimyu]*\2))+\b/);return p("regexp","string-2")}a.eatWhile(S);return p("operator","operator",a.current())}if("`"==b)return c.tokenize=aa,aa(a,c);if("#"==b)return a.skipToEnd(),p("error","error");if(S.test(b))return"\x3e"==
b&&c.lexical&&"\x3e"==c.lexical.type||a.eatWhile(S),p("operator","operator",a.current());if(ba.test(b)){a.eatWhile(ba);b=a.current();if("."!=c.lastType){if(la.propertyIsEnumerable(b))return d=la[b],p(d.type,d.style,b);if("async"==b&&a.match(/^\s*[\(\w]/,!1))return p("async","keyword",b)}return p("variable","variable",b)}}function ya(a){return function(c,b){var d=!1,e;if(T&&"@"==c.peek()&&c.match(za))return b.tokenize=D,p("jsonld-keyword","meta");for(;null!=(e=c.next())&&(e!=a||d);)d=!d&&"\\"==e;d||
(b.tokenize=D);return p("string","string")}}function R(a,c){for(var b=!1,d;d=a.next();){if("/"==d&&b){c.tokenize=D;break}b="*"==d}return p("comment","comment")}function aa(a,c){for(var b=!1,d;null!=(d=a.next());){if(!b&&("`"==d||"$"==d&&a.eat("{"))){c.tokenize=D;break}b=!b&&"\\"==d}return p("quasi","string-2",a.current())}function ca(a,b){b.fatArrowAt&&(b.fatArrowAt=null);var e=a.string.indexOf("\x3d\x3e",a.start);if(!(0>e)){if(w){var d=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(a.string.slice(a.start,
e));d&&(e=d.index)}for(var d=0,A=!1,e=e-1;0<=e;--e){var h=a.string.charAt(e),f="([{}])".indexOf(h);if(0<=f&&3>f){if(!d){++e;break}if(0==--d){"("==h&&(A=!0);break}}else if(3<=f&&6>f)++d;else if(ba.test(h))A=!0;else{if(/["'\/]/.test(h))return;if(A&&!d){++e;break}}}A&&!d&&(b.fatArrowAt=e)}}function ma(a,b,e,d,f,h){this.indented=a;this.column=b;this.type=e;this.prev=f;this.info=h;null!=d&&(this.align=d)}function k(){for(var a=arguments.length-1;0<=a;a--)e.cc.push(arguments[a])}function b(){k.apply(null,
arguments);return!0}function I(a){function b(c){for(;c;c=c.next)if(c.name==a)return!0;return!1}var l=e.state;e.marked="def";l.context?b(l.localVars)||(l.localVars={name:a,next:l.localVars}):!b(l.globalVars)&&r.globalVars&&(l.globalVars={name:a,next:l.globalVars})}function J(){e.state.context={prev:e.state.context,vars:e.state.localVars};e.state.localVars=Aa}function K(){e.state.localVars=e.state.context.vars;e.state.context=e.state.context.prev}function g(a,b){var l=function(){var d=e.state,l=d.indented;
if("stat"==d.lexical.type)l=d.lexical.indented;else for(var h=d.lexical;h&&")"==h.type&&h.align;h=h.prev)l=h.indented;d.lexical=new ma(l,e.stream.column(),a,null,d.lexical,b)};l.lex=!0;return l}function f(){var a=e.state;a.lexical.prev&&(")"==a.lexical.type&&(a.indented=a.lexical.indented),a.lexical=a.lexical.prev)}function m(a){function c(e){return e==a?b():";"==a?k():b(c)}return c}function t(a,c){return"var"==a?b(g("vardef",c.length),da,m(";"),f):"keyword a"==a?b(g("form"),ea,t,f):"keyword b"==
a?b(g("form"),t,f):"{"==a?b(g("}"),U,f):";"==a?b():"if"==a?("else"==e.state.lexical.info&&e.state.cc[e.state.cc.length-1]==f&&e.state.cc.pop()(),b(g("form"),ea,t,f,na)):"function"==a?b(x):"for"==a?b(g("form"),Ba,t,f):"variable"==a?w&&"type"==c?(e.marked="keyword",b(u,m("operator"),u,m(";"))):b(g("stat"),Ca):"switch"==a?b(g("form"),ea,m("{"),g("}","switch"),U,f,f):"case"==a?b(n,m(":")):"default"==a?b(m(":")):"catch"==a?b(g("form"),J,m("("),fa,m(")"),t,f,K):"class"==a?b(g("form"),oa,f):"export"==a?
b(g("stat"),Da,f):"import"==a?b(g("stat"),Ea,f):"module"==a?b(g("form"),y,m("{"),g("}"),U,f,f):"async"==a?b(t):"@"==c?b(n,t):k(g("stat"),n,m(";"),f)}function n(a){return pa(a,!1)}function v(a){return pa(a,!0)}function ea(a){return"("!=a?k():b(g(")"),n,m(")"),f)}function pa(a,c){if(e.state.fatArrowAt==e.stream.start){var l=c?qa:ra;if("("==a)return b(J,g(")"),z(y,")"),f,m("\x3d\x3e"),l,K);if("variable"==a)return k(J,y,m("\x3d\x3e"),l,K)}l=c?L:E;return Fa.hasOwnProperty(a)?b(l):"function"==a?b(x,l):
"class"==a?b(g("form"),Ga,f):"keyword c"==a||"async"==a?b(c?Ha:ga):"("==a?b(g(")"),ga,m(")"),f,l):"operator"==a||"spread"==a?b(c?v:n):"["==a?b(g("]"),Ia,f,l):"{"==a?M(ha,"}",null,l):"quasi"==a?k(V,l):"new"==a?b(Ja(c)):b()}function ga(a){return a.match(/[;\}\)\],]/)?k():k(n)}function Ha(a){return a.match(/[;\}\)\],]/)?k():k(v)}function E(a,c){return","==a?b(n):L(a,c,!1)}function L(a,c,l){var d=0==l?E:L,A=0==l?n:v;if("\x3d\x3e"==a)return b(J,l?qa:ra,K);if("operator"==a)return/\+\+|--/.test(c)?b(d):
"?"==c?b(n,m(":"),A):b(A);if("quasi"==a)return k(V,d);if(";"!=a){if("("==a)return M(v,")","call",d);if("."==a)return b(Ka,d);if("["==a)return b(g("]"),ga,m("]"),f,d);if(w&&"as"==c)return e.marked="keyword",b(u,d)}}function V(a,c){return"quasi"!=a?k():"${"!=c.slice(c.length-2)?b(V):b(n,La)}function La(a){if("}"==a)return e.marked="string-2",e.state.tokenize=aa,b(V)}function ra(a){ca(e.stream,e.state);return k("{"==a?t:n)}function qa(a){ca(e.stream,e.state);return k("{"==a?t:v)}function Ja(a){return function(c){return"."==
c?b(a?Ma:Na):k(a?v:n)}}function Na(a,c){if("target"==c)return e.marked="keyword",b(E)}function Ma(a,c){if("target"==c)return e.marked="keyword",b(L)}function Ca(a){return":"==a?b(f,t):k(E,m(";"),f)}function Ka(a){if("variable"==a)return e.marked="property",b()}function ha(a,c){if("async"==a)return e.marked="property",b(ha);if("variable"==a||"keyword"==e.style)return e.marked="property","get"==c||"set"==c?b(Oa):b(B);if("number"==a||"string"==a)return e.marked=T?"property":e.style+" property",b(B);
if("jsonld-keyword"==a)return b(B);if("modifier"==a)return b(ha);if("["==a)return b(n,m("]"),B);if("spread"==a)return b(n,B);if(":"==a)return k(B)}function Oa(a){if("variable"!=a)return k(B);e.marked="property";return b(x)}function B(a){if(":"==a)return b(v);if("("==a)return k(x)}function z(a,c,l){function d(f,h){if(l?-1<l.indexOf(f):","==f){var g=e.state.lexical;"call"==g.info&&(g.pos=(g.pos||0)+1);return b(function(b,d){return b==c||d==c?k():k(a)},d)}return f==c||h==c?b():b(m(c))}return function(e,
l){return e==c||l==c?b():k(a,d)}}function M(a,c,l){for(var d=3;d<arguments.length;d++)e.cc.push(arguments[d]);return b(g(c,l),z(a,c),f)}function U(a){return"}"==a?b():k(t,U)}function N(a,c){if(w){if(":"==a)return b(u);if("?"==c)return b(N)}}function u(a){if("variable"==a)return e.marked="type",b(O);if("string"==a||"number"==a||"atom"==a)return b(O);if("{"==a)return b(g("}"),z(W,"}",",;"),f,O);if("("==a)return b(z(sa,")"),Pa)}function Pa(a){if("\x3d\x3e"==a)return b(u)}function W(a,c){if("variable"==
a||"keyword"==e.style)return e.marked="property",b(W);if("?"==c)return b(W);if(":"==a)return b(u);if("["==a)return b(n,N,m("]"),W)}function sa(a){if("variable"==a)return b(sa);if(":"==a)return b(u)}function O(a,c){if("\x3c"==c)return b(g("\x3e"),z(u,"\x3e"),f,O);if("|"==c||"."==a)return b(u);if("["==a)return b(m("]"),O);if("extends"==c)return b(u)}function da(){return k(y,N,P,Qa)}function y(a,c){if("modifier"==a)return b(y);if("variable"==a)return I(c),b();if("spread"==a)return b(y);if("["==a)return M(y,
"]");if("{"==a)return M(Ra,"}")}function Ra(a,c){if("variable"==a&&!e.stream.match(/^\s*:/,!1))return I(c),b(P);"variable"==a&&(e.marked="property");return"spread"==a?b(y):"}"==a?k():b(m(":"),y,P)}function P(a,c){if("\x3d"==c)return b(v)}function Qa(a){if(","==a)return b(da)}function na(a,c){if("keyword b"==a&&"else"==c)return b(g("form","else"),t,f)}function Ba(a){if("("==a)return b(g(")"),Sa,m(")"),f)}function Sa(a){return"var"==a?b(da,m(";"),X):";"==a?b(X):"variable"==a?b(Ta):k(n,m(";"),X)}function Ta(a,
c){return"in"==c||"of"==c?(e.marked="keyword",b(n)):b(E,X)}function X(a,c){return";"==a?b(ta):"in"==c||"of"==c?(e.marked="keyword",b(n)):k(n,m(";"),ta)}function ta(a){")"!=a&&b(n)}function x(a,c){if("*"==c)return e.marked="keyword",b(x);if("variable"==a)return I(c),b(x);if("("==a)return b(J,g(")"),z(fa,")"),f,N,t,K);if(w&&"\x3c"==c)return b(g("\x3e"),z(u,"\x3e"),f,x)}function fa(a){return"spread"==a?b(fa):k(y,N,P)}function Ga(a,b){return"variable"==a?oa(a,b):Y(a,b)}function oa(a,c){if("variable"==
a)return I(c),b(Y)}function Y(a,c){if("\x3c"==c)return b(g("\x3e"),z(u,"\x3e"),f,Y);if("extends"==c||"implements"==c||w&&","==a)return b(w?u:n,Y);if("{"==a)return b(g("}"),C,f)}function C(a,c){if("variable"==a||"keyword"==e.style){if(("async"==c||"static"==c||"get"==c||"set"==c||w&&("public"==c||"private"==c||"protected"==c||"readonly"==c||"abstract"==c))&&e.stream.match(/^\s+[\w$\xa1-\uffff]/,!1))return e.marked="keyword",b(C);e.marked="property";return b(w?ia:x,C)}if("["==a)return b(n,m("]"),w?
ia:x,C);if("*"==c)return e.marked="keyword",b(C);if(";"==a)return b(C);if("}"==a)return b();if("@"==c)return b(n,C)}function ia(a,c){return"?"==c?b(ia):":"==a?b(u,P):"\x3d"==c?b(v):k(x)}function Da(a,c){return"*"==c?(e.marked="keyword",b(ja,m(";"))):"default"==c?(e.marked="keyword",b(n,m(";"))):"{"==a?b(z(ua,"}"),ja,m(";")):k(t)}function ua(a,c){if("as"==c)return e.marked="keyword",b(m("variable"));if("variable"==a)return k(v,ua)}function Ea(a){return"string"==a?b():k(Z,va,ja)}function Z(a,c){if("{"==
a)return M(Z,"}");"variable"==a&&I(c);"*"==c&&(e.marked="keyword");return b(Ua)}function va(a){if(","==a)return b(Z,va)}function Ua(a,c){if("as"==c)return e.marked="keyword",b(Z)}function ja(a,c){if("from"==c)return e.marked="keyword",b(n)}function Ia(a){return"]"==a?b():k(z(v,"]"))}var F=xa.indentUnit,wa=r.statementIndent,T=r.jsonld,G=r.json||T,w=r.typescript,ba=r.wordCharacters||/[\w$\xa1-\uffff]/,la=function(){function a(a){return{type:a,style:"keyword"}}var b=a("keyword a"),e=a("keyword b"),d=
a("keyword c"),f=a("operator"),h={type:"atom",style:"atom"},b={"if":a("if"),"while":b,"with":b,"else":e,"do":e,"try":e,"finally":e,"return":d,"break":d,"continue":d,"new":a("new"),"delete":d,"throw":d,"debugger":d,"var":a("var"),"const":a("var"),let:a("var"),"function":a("function"),"catch":a("catch"),"for":a("for"),"switch":a("switch"),"case":a("case"),"default":a("default"),"in":f,"typeof":f,"instanceof":f,"true":h,"false":h,"null":h,undefined:h,NaN:h,Infinity:h,"this":a("this"),"class":a("class"),
"super":a("atom"),yield:d,"export":a("export"),"import":a("import"),"extends":d,await:d};if(w){var e={type:"variable",style:"type"},d={"interface":a("class"),"implements":d,namespace:d,module:a("module"),"enum":a("module"),"public":a("modifier"),"private":a("modifier"),"protected":a("modifier"),"abstract":a("modifier"),string:e,number:e,"boolean":e,any:e},g;for(g in d)b[g]=d[g]}return b}(),S=/[+\-*&%=<>!?|~^@]/,za=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,
H,Q,Fa={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0,"jsonld-keyword":!0},e={state:null,column:null,marked:null,cc:null},Aa={name:"this",next:{name:"arguments"}};f.lex=!0;return{startState:function(a){a={tokenize:D,lastType:"sof",cc:[],lexical:new ma((a||0)-F,0,"block",!1),localVars:r.localVars,context:r.localVars&&{vars:r.localVars},indented:a||0};r.globalVars&&"object"==typeof r.globalVars&&(a.globalVars=r.globalVars);return a},token:function(a,b){a.sol()&&(b.lexical.hasOwnProperty("align")||
(b.lexical.align=!1),b.indented=a.indentation(),ca(a,b));if(b.tokenize!=R&&a.eatSpace())return null;var f=b.tokenize(a,b);if("comment"==H)return f;b.lastType="operator"!=H||"++"!=Q&&"--"!=Q?H:"incdec";a:{var d=H,g=Q,h=b.cc;e.state=b;e.stream=a;e.marked=null;e.cc=h;e.style=f;b.lexical.hasOwnProperty("align")||(b.lexical.align=!0);for(;;)if((h.length?h.pop():G?n:t)(d,g)){for(;h.length&&h[h.length-1].lex;)h.pop()();if(e.marked){f=e.marked;break a}if(d="variable"==d)b:{for(d=b.localVars;d;d=d.next)if(d.name==
g){d=!0;break b}for(h=b.context;h;h=h.prev)for(d=h.vars;d;d=d.next)if(d.name==g){d=!0;break b}d=void 0}if(d){f="variable-2";break a}break a}}return f},indent:function(a,b){if(a.tokenize==R)return q.Pass;if(a.tokenize!=D)return 0;var e=b&&b.charAt(0),d=a.lexical,g;if(!/^\s*else\b/.test(b))for(var h=a.cc.length-1;0<=h;--h){var k=a.cc[h];if(k==f)d=d.prev;else if(k!=na)break}for(;!("stat"!=d.type&&"form"!=d.type||"}"!=e&&(!(g=a.cc[a.cc.length-1])||g!=E&&g!=L||/^[,\.=+\-*:?[\(]/.test(b)));)d=d.prev;wa&&
")"==d.type&&"stat"==d.prev.type&&(d=d.prev);g=d.type;h=e==g;return"vardef"==g?d.indented+("operator"==a.lastType||","==a.lastType?d.info+1:0):"form"==g&&"{"==e?d.indented:"form"==g?d.indented+F:"stat"==g?(e=d.indented,d="operator"==a.lastType||","==a.lastType||S.test(b.charAt(0))||/[,.]/.test(b.charAt(0)),e+(d?wa||F:0)):"switch"!=d.info||h||0==r.doubleIndentSwitch?d.align?d.column+(h?0:1):d.indented+(h?0:F):d.indented+(/^(?:case|default)\b/.test(b)?F:2*F)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,
blockCommentStart:G?null:"/*",blockCommentEnd:G?null:"*/",lineComment:G?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:G?"json":"javascript",jsonldMode:T,jsonMode:G,expressionAllowed:ka,skipExpression:function(a){var b=a.cc[a.cc.length-1];b!=n&&b!=v||a.cc.pop()}}});q.registerHelper("wordChars","javascript",/[\w$]/);q.defineMIME("text/javascript","javascript");q.defineMIME("text/ecmascript","javascript");q.defineMIME("application/javascript","javascript");q.defineMIME("application/x-javascript",
"javascript");q.defineMIME("application/ecmascript","javascript");q.defineMIME("application/json",{name:"javascript",json:!0});q.defineMIME("application/x-json",{name:"javascript",json:!0});q.defineMIME("application/ld+json",{name:"javascript",jsonld:!0});q.defineMIME("text/typescript",{name:"javascript",typescript:!0});q.defineMIME("application/typescript",{name:"javascript",typescript:!0})});